<% maintenance = false %>
<!DOCTYPE html>
<html>
<head>
  <title>ProvisioningPortalv4</title>
  <%= stylesheet_link_tag "main" %>
<% if true # turbolinks?  ; how to remove turbolinks, see: http://blog.steveklabnik.com/posts/2013-06-25-removing-turbolinks-from-rails-4 %>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
<% else %>
  <%= stylesheet_link_tag    'application', media: 'all' %>
  <%= javascript_include_tag 'application' %>
<% end %>
  <%= csrf_meta_tags %>
</head>

<!-- on unload trick found on http://stackoverflow.com/questions/158319/cross-browser-onload-event-and-the-back-button, but it does not seem to work for chrome (still using the local cache upon back/forward button)  -->
<body onunload="">
<% if maintenance == true %>
<h1 style="color:red"> ************** Do not use *** MAINTENANCE ************* <h1>
<% end %>

<span id="noscriptmessage">
<div style="color:red">
   This site requires javascript enabled! Please enable javascript and disable any script blocker for this site!
</div>
</span>

<script>
// remvove the mynoscript alert, if javascript is enabled
// <noscript> ALERT! </noscript> does not work in case of a script blocker like scriptSafe.
// the deployed method works also in case of a script blocker
document.getElementById("noscriptmessage").innerHTML="";
</script>

<% if false %>
<div>
    <% if javascript_enabled? # Selenium::WebDriver::Remote::Capabilities#javascript_enabled? %>
    <p>Javascript Enabled!</p>
    <%- else -%>
    <p>No Javascript</p>
    <%- end -%>
</div>	
<% end %>

<% @mymenue = [:customers, :sites, :users, :provisionings, :targets] %>

<%  # is the link an index?  
    isindex = @mymenue.find { |menueitem| /#{menueitem.to_s}\Z/.match(request.original_url) } 
    isindexBool = !isindex.nil?
%>
<%  # is the link a show page?
    isshow = @mymenue.find { |menueitem| /#{menueitem.to_s}\/[1-9][0-9]*\Z/.match(request.original_url) }
    isshowBool = !isshow.nil?
%>

<% if false # this is now done by "app/assets/javascripts/page_reload.js" %>
<script>
<% if isindexBool || isshowBool %>
      if (window.myRefresh != null) {
        clearTimeout(window.myRefresh);
      }
      window.myRefresh = setTimeout("location.reload(true);",10000000);
      //alert(window.myRefresh);
<% else %>
      if (window.myRefresh != null) {
        clearTimeout(window.myRefresh);
      }
      //alert(window.myRefresh);
      window.myRefresh = null;
<% end %>
</script>
<% end %>
<div style="height: 50px;">
<%= image_tag("ProvisioningEngine_Harmony_Sans_green_and_grey_400x50.gif", :alt => "ProvisioningEngine", title: "ProvisioningEngine") %>
<% if false %>
<FONT STYLE="margin: -50px 0px 10px 10px;font-family:'Harmony Sans','Trebuchet MS', Helvetica, sans-serif; font-size: 32pt;"><span style="color:#88c540;">Provisioning</span><span style="color:#666666;">Engine</span></FONT>
<% end %>
</div>
	
<ul class="semiopaquemenu">
	<% @mymenue.each do |menueitem| %>
		<% if controller_name == menueitem.to_s || controller_name[1..-1] == menueitem %>
	<li class="active"> <%= link_to menueitem.capitalize, menueitem %></li>|
		<% else %>
	<li>				<%= link_to menueitem.capitalize, menueitem %></li>|
		<% end %>
	
	<% end %>
</ul>

<% if false %>
	<ul class="semiopaquemenu">
		<% if controller_name == 'customers' || controller_name == 'customer'%>
		<li class="active">
		<% else %>
		<li>
		<% end %>
			<%= link_to 'Customers', customers_path %></li>|
			
		<% if controller_name == 'sites' || controller_name == 'site'%>
		<li class="active">
		<% else %>
		<li>
		<% end %>
			<%= link_to 'Sites', sites_path %></li>|
			
		<% if controller_name == 'users' || controller_name == 'user'%>
		<li class="active">
		<% else %>
		<li>
		<% end %>
		<%= link_to 'Users', users_path %></li>|
		
		<% if controller_name == 'provisionings' || controller_name == 'provisioning'%>
		<li class="active">
		<% else %>
		<li>
		<% end %>
			<%= link_to 'Provisioning Tasks', provisionings_path %></li>|
			
		<% if controller_name == 'resourcespools' || controller_name == 'resourcepools'%>
		<li class="active">
		<% else %>
		<li>
		<% end %>
			<%= link_to 'Resource Pools', resourcepools_path %></li>|
	</ul>
<% end%>
<br />


				

<%= yield %>

</body>
</html>
